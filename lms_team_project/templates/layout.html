<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>LMS</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet">

    <!-- Bootstrap Icons  -->
    <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <!-- Layout CSS -->
    <link rel="stylesheet"
          href="{{ url_for('static', filename='css/layout.css') }}">

    {% block css %}{% endblock %}
</head>

<body>

<!-- ================= HEADER ================= -->
<header class="header">

    <!-- ë¡œê³  -->
    <div class="logo">
        <a href="/" style="color:white; text-decoration:none;">
            LMS SYSTEM
        </a>
    </div>

<!-- ìš°ì¸¡ ë©”ë‰´ -->
<div class="user-menu">

    {% if session.get('user_id') %}
    
        <!-- í”„ë¡œí•„ + ì´ë¦„ -->
        {% if session.get('user_name') %}
        
            <a href="/mypage">
    
                {% if session.get('profile_image') %}
                <img src="/static/uploads/{{ session['profile_image'] }}"
                     class="header-profile me-2">
                {% else %}
                <img src="/static/img/default.png"
                     class="header-profile me-2">
                {% endif %}
    
            </a>
    
            <span class="user-name">
                {{ session['user_name'] }} ë‹˜
            </span>
    
        {% endif %}
    
    
<!-- ğŸ”¥ ì•± ëŸ°ì²˜ -->
<div class="app-menu">

    <!-- 2Ã—2 ì•„ì´ì½˜ -->
    <i class="bi bi-grid-fill app-icon"
       onclick="toggleAppMenu()"></i>

    <!-- ë“œë¡­ë‹¤ìš´ -->
    <div class="app-dropdown" id="appDropdown">

        <a href="/mypage">
            <i class="bi bi-person"></i>
            <span>ë§ˆì´í˜ì´ì§€</span>
        </a>

        <a href="/logout">
            <i class="bi bi-box-arrow-right"></i>
            <span>ë¡œê·¸ì•„ì›ƒ</span>
        </a>

        {% if session.get('role') == 'admin' %}
        <a href="/admin/members">
            <i class="bi bi-people"></i>
            <span>íšŒì›ê´€ë¦¬</span>
        </a>
        {% endif %}

    </div>   <!-- dropdown ë‹«í˜ -->

</div>       <!-- app-menu ë‹«í˜ -->


    
    {% else %}
    
        <!-- ë¹„ë¡œê·¸ì¸ -->
        <a href="/login"
           class="btn btn-primary btn-sm">
            ë¡œê·¸ì¸
        </a>
    
        <a href="/signup"
           class="btn btn-outline-light btn-sm">
            íšŒì›ê°€ì…
        </a>
    
    {% endif %}
    
    </div>
</header>


<!-- ================= CONTENT ================= -->
<main class="content">

    {% block content %}{% endblock %}

</main>


<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static',
        filename='js/app_menu.js') }}"></script>
</body>
</html>